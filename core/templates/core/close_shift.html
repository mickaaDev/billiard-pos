{% extends "core/base.html" %}

{% block content %}
<div style="max-width: 500px; margin: 40px auto; font-family: sans-serif;">
    <div class="report-card" style="background: #f8f9fa; padding: 20px; border-radius: 12px; border: 1px solid #dee2e6;">
    <h3 style="border-bottom: 2px solid #ddd; padding-bottom: 10px;">–û—Ç—á–µ—Ç –∑–∞ —Å–º–µ–Ω—É</h3>
    
    <div style="display: flex; justify-content: space-between; margin: 10px 0;">
        <span>–í—Å–µ–≥–æ –ø—Ä–æ–¥–∞–Ω–æ —Ç–æ–≤–∞—Ä–æ–≤:</span>
        <strong>{{ report.items_count }} —à—Ç.</strong>
    </div>

    <div style="display: flex; justify-content: space-between; margin: 10px 0;">
        <span>–í—ã—Ä—É—á–∫–∞ (–ë–∞—Ä):</span>
        <strong>{{ report.bar_revenue }} —Å–æ–º</strong>
    </div>

    <div style="display: flex; justify-content: space-between; margin: 10px 0;">
        <span>–í—ã—Ä—É—á–∫–∞ (–í—Ä–µ–º—è/–°—Ç–æ–ª—ã):</span>
        <strong>{{ report.time_revenue }} —Å–æ–º</strong>
    </div>

    <hr>

    <div style="display: flex; justify-content: space-between; margin: 10px 0; color: #28a745; font-size: 1.2em;">
        <span>–ß–∏—Å—Ç–∞—è –ø—Ä–∏–±—ã–ª—å (–ë–∞—Ä):</span>
        <strong>+ {{ report.bar_profit }} —Å–æ–º</strong>
    </div>

    <div style="display: flex; justify-content: space-between; margin: 10px 0; font-weight: bold; font-size: 1.3em;">
        <span>–ò–¢–û–ì–û –ö–ê–°–°–ê:</span>
        <span style="color: #007bff;">{{ expected_cash }} —Å–æ–º</span>
    </div>
</div>
    <div style="background: white; padding: 30px; border-radius: 12px; border: 1px solid #eee; box-shadow: 0 4px 20px rgba(0,0,0,0.1);">
        <h2 style="text-align: center; color: #2c3e50; margin-top: 0;">üèÅ –ó–∞–∫—Ä—ã—Ç–∏–µ —Å–º–µ–Ω—ã</h2>
        <hr style="border: 0; border-top: 1px solid #eee; margin: 20px 0;">

        <table style="width: 100%; border-collapse: collapse; margin-bottom: 25px;">
    <tr>
        <td style="padding: 10px 0; color: #666;">–ù–∞—á–∞–ª–æ —Å–º–µ–Ω—ã:</td>
        <td style="padding: 10px 0; text-align: right; font-weight: bold;">{{ shift.start_time|date:"H:i (d.m)" }}</td>
    </tr>
    <tr>
        <td style="padding: 10px 0; color: #666;">–ù–∞–ª–∏—á–Ω—ã—Ö –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ:</td>
        <td style="padding: 10px 0; text-align: right; font-weight: bold;">{{ shift.start_cash }} —Å–æ–º</td>
    </tr>
    <tr>
        <td style="padding: 10px 0; color: #666;">–í—ã—Ä—É—á–∫–∞ –∑–∞ —Å–º–µ–Ω—É:</td>
        <td style="padding: 10px 0; text-align: right; font-weight: bold; color: #28a745;">+ {{ report.total_revenue }} —Å–æ–º</td>
    </tr>
    <tr style="border-top: 2px solid #eee;">
        <td style="padding: 15px 0; font-weight: bold; font-size: 1.1em;">–ò—Ç–æ–≥–æ –≤ –∫–∞—Å—Å–µ (–æ–∂–∏–¥–∞–µ—Ç—Å—è):</td>
        <td style="padding: 15px 0; text-align: right; font-weight: bold; font-size: 1.2em; color: #007bff;">
            {{ expected_cash }} —Å–æ–º
        </td>
    </tr>
</table>
        
        <form method="post" action="{% url 'core:close_shift' %}">
            {% csrf_token %}
            
            <div style="margin-bottom: 20px;">
                <label style="display: block; font-weight: bold; margin-bottom: 8px; color: #444;">
                    –§–∞–∫—Ç–∏—á–µ—Å–∫–∞—è —Å—É–º–º–∞ –≤ –∫–∞—Å—Å–µ (–ø–µ—Ä–µ—Å—á–∏—Ç–∞–π—Ç–µ –≤—Ä—É—á–Ω—É—é):
                </label>
                <input type="number" name="end_cash" step="0.01" required placeholder="–í–≤–µ–¥–∏—Ç–µ –∏—Ç–æ–≥–æ–≤—É—é —Å—É–º–º—É"
                       style="width: 100%; padding: 15px; border-radius: 8px; border: 2px solid #007bff; box-sizing: border-box; font-size: 1.2em;">
            </div>

            <div style="display: flex; gap: 10px;">
                <a href="{% url 'core:dashboard' %}" 
                   style="flex: 1; text-align: center; padding: 15px; background: #f8f9fa; color: #666; text-decoration: none; border-radius: 8px; font-weight: bold; border: 1px solid #ddd;">
                    –û–¢–ú–ï–ù–ê
                </a>
                <button type="submit" 
                        style="flex: 2; padding: 15px; background: #dc3545; color: white; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; font-size: 1em;"
                        onclick="return confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –∑–∞–∫—Ä—ã—Ç—å —Å–º–µ–Ω—É?')">
                    –ó–ê–ö–†–´–¢–¨ –°–ú–ï–ù–£
                </button>
            </div>
        </form>
    </div>
</div>
{% endblock %}